<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Academic Weather Dashboard</title>
    <meta name="description" content="A simple weather dashboard displaying city temperatures using Chart.js.">
    <!-- Basic styling for readability and presentation -->
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #eef2f7;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 900px;
            margin: 20px auto;
            background-color: #ffffff;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }
        h1, h2 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
        }
        h1 {
            font-size: 2.5em;
            margin-top: 0;
        }
        h2 {
            font-size: 1.5em;
            color: #3498db;
        }
        canvas {
            max-width: 100%;
            height: auto;
            margin-top: 30px;
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.05);
        }
        #avg-temp {
            font-size: 1.4em;
            text-align: center;
            margin-top: 30px;
            font-weight: bold;
            padding: 15px;
            background-color: #e8f0fe;
            border-left: 5px solid #3498db;
            border-radius: 5px;
            color: #2c3e50;
        }
        .footer {
            margin-top: 50px;
            font-size: 0.85em;
            text-align: center;
            color: #7f8c8d;
            padding: 20px;
            border-top: 1px solid #e0e0e0;
            background-color: #fcfcfc;
            border-radius: 0 0 10px 10px; /* Rounded bottom corners */
        }
        .footer pre {
            white-space: pre-wrap;
            text-align: left;
            margin: 10px auto;
            max-width: 700px;
            padding: 10px;
            background-color: #f0f4f8;
            border: 1px solid #dcdcdc;
            border-radius: 5px;
            font-size: 0.75em;
        }
    </style>
    <!-- Chart.js library loaded from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
    <div class="container">
        <h1>Global City Temperatures Dashboard</h1>
        <h2>Visualize Current Weather Conditions</h2>

        <!-- Canvas element for Chart.js to render the bar chart -->
        <canvas id="temp-chart"></canvas>

        <!-- Paragraph element to display the average temperature -->
        <p id="avg-temp">Loading average temperature...</p>
    </div>

    <!-- Footer containing the MIT License information -->
    <footer class="footer">
        <p>This project is licensed under the MIT License.</p>
        <pre>
MIT License

Copyright (c) 2023 [Your Name/Institution]

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in all
copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
SOFTWARE.
        </pre>
    </footer>

    <script>
        /**
         * Main script for the weather dashboard.
         * Executes once the DOM is fully loaded.
         */
        document.addEventListener('DOMContentLoaded', () => {
            // Simulate loading weather data from 'weather.json'.
            // In a real application, this would be an AJAX call (e.g., fetch('weather.json')).
            const weatherData = [
                {"city": "London", "temperature": 15},
                {"city": "Paris", "temperature": 18},
                {"city": "Berlin", "temperature": 12},
                {"city": "Rome", "temperature": 22},
                {"city": "Madrid", "temperature": 25},
                {"city": "New York", "temperature": 10},
                {"city": "Tokyo", "temperature": 20},
                {"city": "Sydney", "temperature": 28},
                {"city": "Cairo", "temperature": 30}
            ];

            // Extract city names (labels) and temperatures (data) for the chart.
            const cities = weatherData.map(data => data.city);
            const temperatures = weatherData.map(data => data.temperature);

            // Calculate the average temperature.
            // Ensure proper handling for empty data to avoid division by zero.
            const totalTemperature = temperatures.reduce((sum, temp) => sum + temp, 0);
            const averageTemperature = temperatures.length > 0
                                       ? (totalTemperature / temperatures.length).toFixed(1) // Format to one decimal place
                                       : 'N/A'; // Handle case where no data is available

            // Update the #avg-temp element with the calculated average temperature.
            const avgTempElement = document.getElementById('avg-temp');
            if (avgTempElement) {
                avgTempElement.textContent = `Average Temperature: ${averageTemperature}°C`;
            }

            // Get the 2D rendering context of the canvas element for Chart.js.
            const ctx = document.getElementById('temp-chart').getContext('2d');

            // Create and render the bar chart using Chart.js.
            new Chart(ctx, {
                type: 'bar', // Specifies a bar chart
                data: {
                    labels: cities, // City names for the x-axis
                    datasets: [{
                        label: 'Temperature (°C)', // Label for the dataset
                        data: temperatures, // Temperature values for the bars
                        backgroundColor: [ // Different colors for visual distinction
                            'rgba(255, 99, 132, 0.7)', // Red
                            'rgba(54, 162, 235, 0.7)', // Blue
                            'rgba(255, 206, 86, 0.7)', // Yellow
                            'rgba(75, 192, 192, 0.7)', // Green
                            'rgba(153, 102, 255, 0.7)', // Purple
                            'rgba(255, 159, 64, 0.7)', // Orange
                            'rgba(199, 199, 199, 0.7)', // Grey
                            'rgba(83, 221, 143, 0.7)',  // Light Green
                            'rgba(255, 132, 99, 0.7)'   // Coral
                        ],
                        borderColor: [ // Matching border colors
                            'rgba(255, 99, 132, 1)',
                            'rgba(54, 162, 235, 1)',
                            'rgba(255, 206, 86, 1)',
                            'rgba(75, 192, 192, 1)',
                            'rgba(153, 102, 255, 1)',
                            'rgba(255, 159, 64, 1)',
                            'rgba(199, 199, 199, 1)',
                            'rgba(83, 221, 143, 1)',
                            'rgba(255, 132, 99, 1)'
                        ],
                        borderWidth: 1 // Border thickness for bars
                    }]
                },
                options: {
                    responsive: true, // Chart will resize with window
                    maintainAspectRatio: false, // Allows chart to take available height/width
                    plugins: {
                        title: {
                            display: true,
                            text: 'City Temperature Distribution', // Chart title
                            font: {
                                size: 20,
                                weight: 'bold'
                            },
                            color: '#2c3e50'
                        },
                        legend: {
                            display: false // No need for legend as there's only one dataset
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return `${context.dataset.label}: ${context.raw}°C`;
                                }
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true, // Y-axis starts from 0
                            title: {
                                display: true,
                                text: 'Temperature (°C)', // Y-axis label
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                color: '#555'
                            },
                            ticks: {
                                callback: function(value) {
                                    return value + '°C'; // Add degree symbol to Y-axis ticks
                                }
                            }
                        },
                        x: {
                            title: {
                                display: true,
                                text: 'City', // X-axis label
                                font: {
                                    size: 14,
                                    weight: 'bold'
                                },
                                color: '#555'
                            }
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>